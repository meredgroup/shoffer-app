# ๐ ุฑุงูููุง ฺฉุงูู ุจุฑุง ูุจุชุฏโูุง

## ๐ค **ฺุทูุฑ ฺฉุงุฑ ูโฺฉููุ**

### **ููููู ฺฉู:**
ูฺฉุฑ ฺฉู ุงูพูฺฉุดู ุดูุง ฒ ุจุฎุด ุฏุงุฑู:

```
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโ
โ   ูุฑุงูุชโุงูุฏ      โ  โโ     โ    ุจฺฉโุงูุฏ        โ
โ  (ุตูุญุงุช ูุจ)     โ  ุชุจุงุฏู  โ (API + ุฏุชุงุจุณ)  โ
โ  Next.js        โ  ุฏุงุฏู   โ  Cloudflare      โ
โ  Port 3000      โ         โ  Port 8787       โ
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโ
```

**ูุฑุงูุชโุงูุฏ (Frontend):**
- ุตูุญุงุช ฺฉู ฺฉุงุฑุจุฑ ูโุจูู
- ุฏฺฉููโูุงุ ูุฑูโูุงุ ูุณุช ุณูุฑูุง
- ุฏุฑ ูุฑูุฑฺฏุฑ ุงุฌุฑุง ูโุดู
- โ ุงูุงู ุงุฌุฑุง ุดุฏู (localhost:3000)

**ุจฺฉโุงูุฏ (Backend):**
- ููุทู ุจุฑูุงูู ู ุฏุชุงุจุณ
- ุซุจุช ฺฉุงุฑุจุฑุ ุฐุฎุฑู ุณูุฑุ ฺุช
- ุฑู ุณุฑูุฑ ุงุฌุฑุง ูโุดู
- โณ ูููุฒ ุงุฌุฑุง ูุดุฏู

---

## ๐พ **ุฏุชุงุจุณ ฺุทูุฑ ฺฉุงุฑ ูโฺฉููุ**

### **ฒ ุญุงูุช ุฏุงุฑู:**

#### **ฑ. ุญุงูุช ูุญู (Development) - ุจุฑุง ุฒูุงู ุชูุณุนู**
```
ฺฉุงููพูุชุฑ ุดูุง
โโโ ูุฑุงูุชโุงูุฏ (localhost:3000)
โโโ ุจฺฉโุงูุฏ (localhost:8787)
โโโ ุฏุชุงุจุณ (SQLite ูุงู ูุญู)
    โโโ ุฐุฎุฑู ุฏุฑ: .wrangler/state/
```

**ูุฒุงุง:**
- โ ุฑุงฺฏุงู
- โ ุณุฑุน
- โ ุขููุงู ฺฉุงุฑ ูโฺฉูู
- โ ุจุฑุง ุชุณุช ุนุงูู

**ูุนุงุจ:**
- โ ููุท ุฑู ฺฉุงููพูุชุฑ ุดูุง
- โ ุฏฺฏุฑุงู ููโุชููู ุจุจูู
- โ ุงฺฏุฑ ูพุงฺฉ ฺฉูุ ุงุฒ ุจู ูุฑู

#### **ฒ. ุญุงูุช ุชููุฏ (Production) - ุจุฑุง ุฒูุงู ุงูุชุดุงุฑ**
```
Cloudflare (ุงุจุฑ)
โโโ ูุฑุงูุชโุงูุฏ (shoffer.ir)
โโโ ุจฺฉโุงูุฏ (api.shoffer.ir)
โโโ ุฏุชุงุจุณ (D1 Database)
    โโโ ุฐุฎุฑู ุฏุฑ: ุณุฑูุฑูุง Cloudflare
```

**ูุฒุงุง:**
- โ ููู ูโุชููู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดู
- โ ููุดู ุขููุงู
- โ ุณุฑุน ู ูุทูุฆู
- โ ูพุดุชุจุงูโฺฏุฑ ุฎูุฏฺฉุงุฑ

**ูุนุงุจ:**
- โ๏ธ ูุงุฒ ุจู ุชูุธูุงุช ุจุดุชุฑ
- ๐ฐ ููฺฉูู ูุฒูู ุฏุงุดุชู ุจุงุดู (ุฑุงฺฏุงู ุชุง ุญุฏ ูุนู)

---

## โ **ุฌูุงุจ ุณูุงูุงุช ุดูุง:**

### **ฑ. ุจุงุฏ SQLite ูุตุจ ฺฉููุ**
**ุฌูุงุจ: ุฎุฑ! ูุงุฒ ูุณุช** โ

ฺุฑุงุ
- `wrangler` ุฎูุฏุด SQLite ุฑู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุฏุฑุช ูโฺฉูู
- ููุท ุจุงุฏ `wrangler` ูุตุจ ุจุงุดู (ุจุง npm ูุตุจ ูโุดู)
- ูุงู ุฏุชุงุจุณ ุฎูุฏฺฉุงุฑ ุฏุฑ ูพูุดู `.wrangler` ุณุงุฎุชู ูโุดู

---

### **ฒ. ููุดู ุฏุงุฏูโูุง ูุญู ุฐุฎุฑู ูโุดูุ**
**ุฌูุงุจ: ุจุณุชฺฏ ุจู ูุญุท ุฏุงุฑู**

**ุงูุงู (Development):**
- โ ุจููุ ูุญู ุฐุฎุฑู ูโุดู
- ูุณุฑ: `workers/.wrangler/state/v3/d1/`
- ููุท ุฑู ฺฉุงููพูุชุฑ ุดูุง
- ุจุฑุง ุชุณุช ู ุชูุณุนู

**ุจุนุฏ ุงุฒ Deploy (Production):**
- โ ููุ ุฏุฑ Cloudflare ุฐุฎุฑู ูโุดู
- ููู ฺฉุงุฑุจุฑุงู ุจู ฺฉ ุฏุชุงุจุณ ูุชุตู ูโุดู
- ุฏุฑ ุณุฑูุฑูุง Cloudflare ูฺฏูุฏุงุฑ ูโุดู

---

### **ณ. ูโุชููู ุงุฒ ุงูุงู ุชู Cloudflare ุฐุฎุฑู ฺฉููุ**
**ุฌูุงุจ: ุจููุ ุงูุง ุชูุตู ููโุดู!** โ๏ธ

**ฺุฑุง ุชูุตู ููโุดู:**
- ๐งช ุงูุงู ุฒูุงู ุชุณุชู
- ๐ ููฺฉูู ุจุงฺฏ ูุฌูุฏ ุฏุงุดุชู ุจุงุดู
- ๐ ุฏุงุฏูโูุง ุฑู ูุฏุงู ุนูุถ ูโฺฉู
- ๐ฐ ูุฑ ุฏุฑุฎูุงุณุช ูุฒูู ุฏุงุฑู (ุงฺฏุฑฺู ฺฉู)

**ฺฉ ุจุงุฏ ุงุณุชูุงุฏู ฺฉู:**
- โ ููุช ุงูพ ฺฉุงููุงู ุชุณุช ุดุฏ
- โ ููุช ุขูุงุฏู ุงูุชุดุงุฑ ุดุฏ
- โ ููุช ูโุฎูุง ุจู ุฏฺฏุฑุงู ูุดูู ุจุฏ

---

## ๐๏ธ **ุญุงูุง ฺฺฉุงุฑ ฺฉููุ (ูุฑุญูู ุจู ูุฑุญูู)**

### **ูุฑุญูู ฑ: ุณุงุฎุช ูุงู .env.local** (ุฎู ููู!)

ูุฑุงูุชโุงูุฏ ุดูุง ุงูุงู ููโุฏููู ุจฺฉโุงูุฏ ฺฉุฌุงุณุช. ุจุงุฏ ุจูุด ุจฺฏู:

**ฑ. ุฏุฑ ูพูุดู ุงุตู ูพุฑูฺู (`Shoffer`) ูุงู ุฌุฏุฏ ุจุณุงุฒ:**
- ูุงู: `.env.local`
- ููุน: Text File

**ฒ. ุงู ูุญุชูุง ุฑู ุฏุงุฎูุด ุจููุณ:**
```env
NEXT_PUBLIC_API_URL=http://localhost:8787
NEXT_PUBLIC_WS_URL=ws://localhost:8787
```

**ณ. ุฐุฎุฑู ฺฉู**

**ด. ูุฑุงูุชโุงูุฏ ุฑู ุฑุณุชุงุฑุช ฺฉู:**
- ุฏุฑ ุชุฑููุงู `Ctrl+C` ุจุฒู
- ุฏูุจุงุฑู `npm run dev` ุจุฒู

---

### **ูุฑุญูู ฒ: ูุตุจ wrangler** (ุงฺฏุฑ ูุตุจ ูุณุช)

```bash
# ูุตุจ wrangler ุจู ุตูุฑุช global
npm install -g wrangler
```

**ฺฺฉ ฺฉู ูุตุจ ุดุฏู:**
```bash
wrangler --version
```

ุจุงุฏ ูุณุฎู wrangler ุฑู ุจุจู (ูุซูุงู `3.x.x`)

---

### **ูุฑุญูู ณ: ูุตุจ ฺฉุชุงุจุฎุงููโูุง ุจฺฉโุงูุฏ** (ุฏุฑ ุญุงู ุงูุฌุงู)

ุงู ูุณูุช ุงุงูุงู ุฏุงุฑู ุงุฌุฑุง ูโุดู. ุตุจุฑ ฺฉู ุชุง ุชููู ุจุดู:

```bash
cd workers
npm install
```

**ุฒูุงู:** ฒ-ณ ุฏููู

---

### **ูุฑุญูู ด: ุณุงุฎุช ุฏุชุงุจุณ ูุญู**

ุจุนุฏ ุงุฒ ุงูฺฉู npm install ุชููู ุดุฏ:

```bash
# ุฏุฑ ูพูุดู workers
wrangler d1 execute shoffer-db --local --file=../schema/migrations/0001_init.sql
```

**ุงู ุฏุณุชูุฑ ฺฺฉุงุฑ ูโฺฉูู:**
- ฺฉ ูุงู SQLite ุฏุฑ `.wrangler/state/` ูโุณุงุฒู
- ฑธ ุชุง ุฌุฏูู ูโุณุงุฒู:
  - `users` (ฺฉุงุฑุจุฑูุง)
  - `rides` (ุณูุฑูุง)
  - `bookings` (ุฑุฒุฑููุง)
  - `vehicles` (ุฎูุฏุฑููุง)
  - `messages` (ูพุงูโูุง)
  - ู ุบุฑู...

**ุงูุชุธุงุฑ ููููุช:**
```
๐ Executing on local database shoffer-db (xxxx-xxxx-xxxx-xxxx)...
๐ฃ Executed 18 commands in 0.5s
```

---

### **ูุฑุญูู ต: ุงุถุงูู ฺฉุฑุฏู ุฏุงุฏูโูุง ููููู** (ุงุฎุชุงุฑ ุงูุง ุชูุตู ูโุดู)

```bash
# ุฏุฑ ูพูุดู workers
wrangler d1 execute shoffer-db --local --file=../schema/seed.sql
```

**ุงู ุฏุณุชูุฑ ฺฺฉุงุฑ ูโฺฉูู:**
- ฺูุฏ ฺฉุงุฑุจุฑ ููููู ูโุณุงุฒู
- ฺูุฏ ุณูุฑ ููููู ุงุถุงูู ูโฺฉูู
- ูโุชูู ุจุฏูู ุซุจุช ูุงู ุชุณุช ฺฉู

**ฺฉุงุฑุจุฑูุง ููููู:**
- ุงูู: `john@example.com`
- ุฑูุฒ: `password123`

---

### **ูุฑุญูู ถ: ุงุฌุฑุง ุจฺฉโุงูุฏ**

```bash
# ุฏุฑ ูพูุดู workers
wrangler dev
```

**ุงู ุฏุณุชูุฑ ฺฺฉุงุฑ ูโฺฉูู:**
- ุจฺฉโุงูุฏ ุฑู ุฑู `localhost:8787` ุงุฌุฑุง ูโฺฉูู
- ุจู ุฏุชุงุจุณ ูุญู ูุตู ูโุดู
- ุขูุงุฏู ุฏุฑุงูุช ุฏุฑุฎูุงุณุช ุงุฒ ูุฑุงูุชโุงูุฏ

**ุงูุชุธุงุฑ ููููุช:**
```
โ๏ธ wrangler 3.x.x
-------------------
โ Starting local server...
๐ Listening on http://localhost:8787
```

**ุชุณุช ฺฉู:**
ุจุงุฒฺฉู: http://localhost:8787/health

ุจุงุฏ ุจุจู:
```json
{"status":"healthy"}
```

---

## โ **ุจุนุฏ ุงุฒ ุงู ูุฑุงุญู ฺ ุฏุงุฑุ**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ฺฉุงููพูุชุฑ ุดูุง                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                     โ
โ  ุชุฑููุงู ฑ:                         โ
โ  โ npm run dev โ localhost:3000   โ
โ     (ูุฑุงูุชโุงูุฏ)                     โ
โ                                     โ
โ  ุชุฑููุงู ฒ:                         โ
โ  โ wrangler dev โ localhost:8787  โ
โ     (ุจฺฉโุงูุฏ + API)                  โ
โ                                     โ
โ  ุฏุชุงุจุณ:                           โ
โ  โ SQLite ุฏุฑ .wrangler/state/     โ
โ     (ุฏุงุฏูโูุง ูุญู)                 โ
โ                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุญุงูุง ูโุชูู:**
- โ ุซุจุชโูุงู ฺฉู
- โ ูุงฺฏู ฺฉู
- โ ุณูุฑ ุฌุณุชุฌู ฺฉู
- โ ุฑุฒุฑู ุงูุฌุงู ุจุฏ
- โ ฺุช ฺฉู
- โ ุณูุฑ ุงุฌุงุฏ ฺฉู (ุฑุงููุฏู)

**ููู ฺุฒ ูุญู ู ุฑุงฺฏุงูู!** ๐

---

## ๐ **ุจุนุฏุงู: ุงูุชุดุงุฑ ุฏุฑ Cloudflare**

ููุช ุขูุงุฏู ุดุฏุ ูโุชูู deploy ฺฉู:

```bash
# Deploy ุจฺฉโุงูุฏ
cd workers
wrangler deploy

# ุณุงุฎุช ุฏุชุงุจุณ ุฏุฑ Cloudflare
wrangler d1 create shoffer-db
wrangler d1 execute shoffer-db --file=../schema/migrations/0001_init.sql

# Deploy ูุฑุงูุชโุงูุฏ
cd ..
npm run build
wrangler pages deploy .next
```

**ุจุนุฏ ุงุฒ deploy:**
- ุฏุชุงุจุณ ุฏุฑ Cloudflare D1
- ุจฺฉโุงูุฏ ุฑู Workers
- ูุฑุงูุชโุงูุฏ ุฑู Pages
- ููู ุขููุงู ู ุฏุฑ ุฏุณุชุฑุณ

---

## ๐ **ููุงุณู ูุญู vs ุชููุฏ**

| ูฺฺฏ | ูุญู (Local) | ุชููุฏ (Production) |
|-------|-------------|-------------------|
| ุฏุชุงุจุณ | SQLite ูุงู | Cloudflare D1 |
| ุฏุณุชุฑุณ | ููุท ุดูุง | ููู ุฌูุงู |
| ูุฒูู | ุฑุงฺฏุงู ฑฐฐูช | ุฑุงฺฏุงู ุชุง ุญุฏ ุฒุงุฏ |
| ุณุฑุนุช | ุฎู ุณุฑุน | ุณุฑุน |
| ูุงุฒ ุจู ูุช | ูู | ุจูู |
| ุงุณุชูุงุฏู | ุชุณุช ู ุชูุณุนู | ุงุณุชูุงุฏู ูุงูุน |

---

## ๐ฏ **ฺฺฉโูุณุช: ุขูุงุฏูโุงุ**

ูุจู ุงุฒ ุดุฑูุน ูุทูุฆู ุดู:

- [ ] Node.js ูุตุจ ุดุฏู (ฺฺฉ: `node --version`)
- [ ] npm ูุตุจ ุดุฏู (ฺฺฉ: `npm --version`)
- [ ] wrangler ูุตุจ ุดุฏู (ฺฺฉ: `wrangler --version`)
- [ ] ูุงู `.env.local` ุณุงุฎุชู ุดุฏู
- [ ] ุฏู ุชุฑููุงู ุจุงุฒ ุฏุงุฑ
- [ ] ุงูุชุฑูุช ูุชุตู (ุจุฑุง ูุตุจ packages)

---

## ๐ **ูุดฺฉูุงุช ุฑุงุฌ**

### **ูุดฺฉู: "wrangler: command not found"**
```bash
# ุฑุงูโุญู
npm install -g wrangler
```

### **ูุดฺฉู: "Database not found"**
```bash
# ุฑุงูโุญู - ุฏูุจุงุฑู ุฏุชุงุจุณ ุจุณุงุฒ
cd workers
wrangler d1 execute shoffer-db --local --file=../schema/migrations/0001_init.sql
```

### **ูุดฺฉู: "undefined ุฏุฑ URL"**
```bash
# ุฑุงูโุญู - ูุงู .env.local ุจุณุงุฒ
# ูุญุชูุง:
NEXT_PUBLIC_API_URL=http://localhost:8787
NEXT_PUBLIC_WS_URL=ws://localhost:8787

# ุจุนุฏ ูุฑุงูุชโุงูุฏ ุฑู ุฑุณุชุงุฑุช ฺฉู
```

---

## ๐ก **ูฺฉุงุช ููู ุจุฑุง ูุจุชุฏโูุง**

### **ฑ. ุฏุชุงุจุณ ูุญู ฺฉุฌุงุณุชุ**
```
workers/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/
```
ฺฉ ูุงู SQLite ุณุงุฏู ุงุณุช ฺฉู ูโุชูู ุจุง ุจุฑูุงููโูุง ูุซู "DB Browser for SQLite" ุจุงุฒุด ฺฉู.

### **ฒ. ุงุทูุงุนุงุช ูพุงฺฉ ูโุดูุ**
- ุฎุฑ! ุชุง ููุช ฺฉู ูพูุดู `.wrangler` ุฑู ูพุงฺฉ ูฺฉูุ ุญูุธ ูโุดู
- ุญุช ุงฺฏุฑ ุจฺฉโุงูุฏ ุฑู ุจุจูุฏ ู ุฏูุจุงุฑู ุจุงุฒ ฺฉู

### **ณ. ฺุทูุฑ ุฏุชุงุจุณ ุฑู ุจุจููุ**
```bash
# ูุณุช ุฌุฏุงูู
cd workers
wrangler d1 execute shoffer-db --local --command="SELECT name FROM sqlite_master WHERE type='table'"

# ูุญุชูุง ุฌุฏูู users
wrangler d1 execute shoffer-db --local --command="SELECT * FROM users"
```

### **ด. ูโุฎูุงู ุงุฒ ุงูู ุดุฑูุน ฺฉูู**
```bash
# ูพุงฺฉ ฺฉุฑุฏู ุฏุชุงุจุณ
rm -rf workers/.wrangler

# ุณุงุฎุช ุฏูุจุงุฑู
wrangler d1 execute shoffer-db --local --file=../schema/migrations/0001_init.sql
wrangler d1 execute shoffer-db --local --file=../schema/seed.sql
```

---

## ๐ **ุฎูุงุตู ุจุฑุง ุดุฑูุน:**

```bash
# ฑ. ุณุงุฎุช .env.local (ฺฉ ุจุงุฑ)
# ูุญุชูุง: NEXT_PUBLIC_API_URL=http://localhost:8787

# ฒ. ูุตุจ wrangler (ฺฉ ุจุงุฑ)
npm install -g wrangler

# ณ. ูุตุจ packages ุจฺฉโุงูุฏ (ฺฉ ุจุงุฑ)
cd workers
npm install

# ด. ุณุงุฎุช ุฏุชุงุจุณ (ฺฉ ุจุงุฑ)
wrangler d1 execute shoffer-db --local --file=../schema/migrations/0001_init.sql
wrangler d1 execute shoffer-db --local --file=../schema/seed.sql

# ต. ุงุฌุฑุง (ูุฑ ุจุงุฑ)
# ุชุฑููุงู ฑ:
npm run dev

# ุชุฑููุงู ฒ:
cd workers
wrangler dev
```

**ุจุนุฏ ุจุงุฒฺฉู:** http://localhost:3000 ๐

---

**ุงูุฏูุงุฑู ูุงุถุญ ุดุฏู ุจุงุดู! ุงฺฏู ุณูุงู ุฏุงุดุชุ ุจูพุฑุณ.** ๐
